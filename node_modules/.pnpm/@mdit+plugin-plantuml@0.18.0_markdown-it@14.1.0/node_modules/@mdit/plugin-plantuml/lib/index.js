import{uml as ke}from"@mdit/plugin-uml";var m=32768,Pe=0,Ge=1,Re=2,Te=!0,Ue=32768,je=64,xn=1024*8,re=2*m,A=3,en=258,qe=16,qn=8192,te=13,fe=qn,Bn=1<<te,Dn=Bn-1,oe=m-1,fn=0,Be=4096,yn=en+A+1,on=m-yn,Z=1,Q=15,De=7,En=29,An=256,ie=256,M=An+1+En,k=30,ln=19,le=16,ae=17,ce=18,gn=2*M+1,Fn=parseInt((te+A-1)/A),V,v,pn,Hn,Y=null,g,x,Cn,c,Kn,Ln,N,O,P,j,G,W,ue,an,s,$,u,cn,q,h,de,Mn,J,se,R,B,D,nn,y,I,S,E,p,w,F,rn,z,un,dn,Nn,bn,$n,H,In,On,sn,Sn,tn,zn,kn,Wn,Xn=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],hn=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],he=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Zn=[new T(0,0,0,0),new T(4,4,8,4),new T(4,5,16,8),new T(4,6,32,32),new T(4,4,16,16),new T(8,16,32,32),new T(8,16,128,128),new T(8,32,128,256),new T(32,128,258,1024),new T(32,258,258,4096)];function wn(){this.fc=0,this.dl=0}function Qn(){this.dyn_tree=null,this.static_tree=null,this.extra_bits=null,this.extra_base=0,this.elems=0,this.max_length=0,this.max_code=0}function T(n,e,r,t){this.good_length=n,this.max_lazy=e,this.nice_length=r,this.max_chain=t}function Fe(){this.next=null,this.len=0,this.ptr=new Array(xn),this.off=0}function He(n){var e;if(J=n,Hn=!1,q=!1,Y==null){for(V=v=pn=null,Y=new Array(xn),c=new Array(re),Kn=new Array(fe),Ln=new Array(Ue+je),N=new Array(1<<qe),R=new Array(gn),e=0;e<gn;e++)R[e]=new wn;for(B=new Array(2*k+1),e=0;e<2*k+1;e++)B[e]=new wn;for(D=new Array(M+2),e=0;e<M+2;e++)D[e]=new wn;for(nn=new Array(k),e=0;e<k;e++)nn[e]=new wn;for(y=new Array(2*ln+1),e=0;e<2*ln+1;e++)y[e]=new wn;I=new Qn,S=new Qn,E=new Qn,p=new Array(Q+1),w=new Array(2*M+1),z=new Array(2*M+1),un=new Array(en-A+1),dn=new Array(512),Nn=new Array(En),bn=new Array(k),$n=new Array(parseInt(qn/8))}}function Ke(n){n.next=V,V=n}function Le(){var n;return V!=null?(n=V,V=V.next):n=new Fe,n.next=null,n.len=n.off=0,n}function we(n){return N[m+n]}function _e(n,e){return N[m+n]=e}function Pn(n){Y[x+g++]=n,x+g==xn&&Je()}function Gn(n){n&=65535,x+g<xn-2?(Y[x+g++]=n&255,Y[x+g++]=n>>>8):(Pn(n&255),Pn(n>>>8))}function Rn(){G=(G<<Fn^c[u+A-1]&255)&Dn,W=we(G),N[u&oe]=W,_e(G,u)}function K(n,e){C(e[n].fc,e[n].dl)}function me(n){return(n<256?dn[n]:dn[256+(n>>7)])&255}function ve(n,e,r){return n[e].fc<n[r].fc||n[e].fc==n[r].fc&&z[e]<=z[r]}function xe(n,e,r){var t;for(t=0;t<r&&Wn<kn.length;t++)n[e+t]=kn.charCodeAt(Wn++)&255;return t}function Me(){var n;for(n=0;n<Bn;n++)N[m+n]=0;if(Mn=Zn[J].max_lazy,se=Zn[J].good_length,de=Zn[J].max_chain,u=0,j=0,h=xe(c,0,2*m),h<=0){q=!0,h=0;return}for(q=!1;h<yn&&!q;)Vn();for(G=0,n=0;n<A-1;n++)G=(G<<Fn^c[n]&255)&Dn}function ye(n){var e=de,r=u,t,f,o=$,l=u>on?u-on:fn,a=u+en,i=c[r+o-1],_=c[r+o];$>=se&&(e>>=2);do if(t=n,!(c[t+o]!=_||c[t+o-1]!=i||c[t]!=c[r]||c[++t]!=c[r+1])){r+=2,t++;do;while(c[++r]==c[++t]&&c[++r]==c[++t]&&c[++r]==c[++t]&&c[++r]==c[++t]&&c[++r]==c[++t]&&c[++r]==c[++t]&&c[++r]==c[++t]&&c[++r]==c[++t]&&r<a);if(f=en-(a-r),r=a-en,f>o){if(cn=n,o=f,Te&&f>=en)break;i=c[r+o-1],_=c[r+o]}}while((n=N[n&oe])>l&&--e!=0);return o}function Vn(){var n,e,r=re-h-u;if(r==-1)r--;else if(u>=m+on){for(n=0;n<m;n++)c[n]=c[n+m];for(cn-=m,u-=m,j-=m,n=0;n<Bn;n++)e=we(n),_e(n,e>=m?e-m:fn);for(n=0;n<m;n++)e=N[n],N[n]=e>=m?e-m:fn;r+=m}q||(n=xe(c,u+h,r),n<=0?q=!0:h+=n)}function Ne(){for(;h!=0&&v==null;){var n;if(Rn(),W!=fn&&u-W<=on&&(s=ye(W),s>h&&(s=h)),s>=A)if(n=_n(u-cn,s-A),h-=s,s<=Mn){s--;do u++,Rn();while(--s!=0);u++}else u+=s,s=0,G=c[u]&255,G=(G<<Fn^c[u+1]&255)&Dn;else n=_n(0,c[u]&255),h--,u++;for(n&&(Tn(0),j=u);h<yn&&!q;)Vn()}}function Oe(){for(;h!=0&&v==null;){if(Rn(),$=s,ue=cn,s=A-1,W!=fn&&$<Mn&&u-W<=on&&(s=ye(W),s>h&&(s=h),s==A&&u-cn>Be&&s--),$>=A&&s<=$){var n;n=_n(u-1-ue,$-A),h-=$-1,$-=2;do u++,Rn();while(--$!=0);an=0,s=A-1,u++,n&&(Tn(0),j=u)}else an!=0?(_n(0,c[u-1]&255)&&(Tn(0),j=u),u++,h--):(an=1,u++,h--);for(;h<yn&&!q;)Vn()}}function We(){q||(O=0,P=0,Ze(),Me(),v=null,g=0,x=0,J<=3?($=A-1,s=0):(s=A-1,an=0),Cn=!1)}function Xe(n,e,r){var t;return!Hn&&(We(),Hn=!0,h==0)?(Cn=!0,0):(t=Ae(n,e,r))==r?r:Cn?t:(J<=3?Ne():Oe(),h==0&&(an!=0&&_n(0,c[u-1]&255),Tn(1),Cn=!0),t+Ae(n,t+e,r-t))}function Ae(n,e,r){var t,f,o;for(t=0;v!=null&&t<r;){for(f=r-t,f>v.len&&(f=v.len),o=0;o<f;o++)n[e+t+o]=v.ptr[v.off+o];if(v.off+=f,v.len-=f,t+=f,v.len==0){var l;l=v,v=v.next,Ke(l)}}if(t==r)return t;if(x<g){for(f=r-t,f>g-x&&(f=g-x),o=0;o<f;o++)n[e+t+o]=Y[x+o];x+=f,t+=f,g==x&&(g=x=0)}return t}function Ze(){var n,e,r,t,f;if(nn[0].dl==0){for(I.dyn_tree=R,I.static_tree=D,I.extra_bits=Xn,I.extra_base=An+1,I.elems=M,I.max_length=Q,I.max_code=0,S.dyn_tree=B,S.static_tree=nn,S.extra_bits=hn,S.extra_base=0,S.elems=k,S.max_length=Q,S.max_code=0,E.dyn_tree=y,E.static_tree=null,E.extra_bits=Ee,E.extra_base=0,E.elems=ln,E.max_length=De,E.max_code=0,r=0,t=0;t<En-1;t++)for(Nn[t]=r,n=0;n<1<<Xn[t];n++)un[r++]=t;for(un[r-1]=t,f=0,t=0;t<16;t++)for(bn[t]=f,n=0;n<1<<hn[t];n++)dn[f++]=t;for(f>>=7;t<k;t++)for(bn[t]=f<<7,n=0;n<1<<hn[t]-7;n++)dn[256+f++]=t;for(e=0;e<=Q;e++)p[e]=0;for(n=0;n<=143;)D[n++].dl=8,p[8]++;for(;n<=255;)D[n++].dl=9,p[9]++;for(;n<=279;)D[n++].dl=7,p[7]++;for(;n<=287;)D[n++].dl=8,p[8]++;for(pe(D,M+1),n=0;n<k;n++)nn[n].dl=5,nn[n].fc=Ie(n,5);ge()}}function ge(){var n;for(n=0;n<M;n++)R[n].fc=0;for(n=0;n<k;n++)B[n].fc=0;for(n=0;n<ln;n++)y[n].fc=0;R[ie].fc=1,tn=zn=0,H=In=On=0,sn=0,Sn=1}function Yn(n,e){for(var r=w[e],t=e<<1;t<=F&&(t<F&&ve(n,w[t+1],w[t])&&t++,!ve(n,r,w[t]));)w[e]=w[t],e=t,t<<=1;w[e]=r}function Qe(n){var e=n.dyn_tree,r=n.extra_bits,t=n.extra_base,f=n.max_code,o=n.max_length,l=n.static_tree,a,i,_,d,b,U,L=0;for(d=0;d<=Q;d++)p[d]=0;for(e[w[rn]].dl=0,a=rn+1;a<gn;a++)i=w[a],d=e[e[i].dl].dl+1,d>o&&(d=o,L++),e[i].dl=d,!(i>f)&&(p[d]++,b=0,i>=t&&(b=r[i-t]),U=e[i].fc,tn+=U*(d+b),l!=null&&(zn+=U*(l[i].dl+b)));if(L!=0){do{for(d=o-1;p[d]==0;)d--;p[d]--,p[d+1]+=2,p[o]--,L-=2}while(L>0);for(d=o;d!=0;d--)for(i=p[d];i!=0;)_=w[--a],!(_>f)&&(e[_].dl!=d&&(tn+=(d-e[_].dl)*e[_].fc,e[_].fc=d),i--)}}function pe(n,e){var r=new Array(Q+1),t=0,f,o;for(f=1;f<=Q;f++)t=t+p[f-1]<<1,r[f]=t;for(o=0;o<=e;o++){var l=n[o].dl;l!=0&&(n[o].fc=Ie(r[l]++,l))}}function Jn(n){var e=n.dyn_tree,r=n.static_tree,t=n.elems,f,o,l=-1,a=t;for(F=0,rn=gn,f=0;f<t;f++)e[f].fc!=0?(w[++F]=l=f,z[f]=0):e[f].dl=0;for(;F<2;){var i=w[++F]=l<2?++l:0;e[i].fc=1,z[i]=0,tn--,r!=null&&(zn-=r[i].dl)}for(n.max_code=l,f=F>>1;f>=1;f--)Yn(e,f);do f=w[Z],w[Z]=w[F--],Yn(e,Z),o=w[Z],w[--rn]=f,w[--rn]=o,e[a].fc=e[f].fc+e[o].fc,z[f]>z[o]+1?z[a]=z[f]:z[a]=z[o]+1,e[f].dl=e[o].dl=a,w[Z]=a++,Yn(e,Z);while(F>=2);w[--rn]=w[Z],Qe(n),pe(e,l)}function Ce(n,e){var r,t=-1,f,o=n[0].dl,l=0,a=7,i=4;for(o==0&&(a=138,i=3),n[e+1].dl=65535,r=0;r<=e;r++)f=o,o=n[r+1].dl,!(++l<a&&f==o)&&(l<i?y[f].fc+=l:f!=0?(f!=t&&y[f].fc++,y[le].fc++):l<=10?y[ae].fc++:y[ce].fc++,l=0,t=f,o==0?(a=138,i=3):f==o?(a=6,i=3):(a=7,i=4))}function be(n,e){var r,t=-1,f,o=n[0].dl,l=0,a=7,i=4;for(o==0&&(a=138,i=3),r=0;r<=e;r++)if(f=o,o=n[r+1].dl,!(++l<a&&f==o)){if(l<i)do K(f,y);while(--l!=0);else f!=0?(f!=t&&(K(f,y),l--),K(le,y),C(l-3,2)):l<=10?(K(ae,y),C(l-3,3)):(K(ce,y),C(l-11,7));l=0,t=f,o==0?(a=138,i=3):f==o?(a=6,i=3):(a=7,i=4)}}function Ve(){var n;for(Ce(R,I.max_code),Ce(B,S.max_code),Jn(E),n=ln-1;n>=3&&y[he[n]].dl==0;n--);return tn+=3*(n+1)+5+5+4,n}function Ye(n,e,r){var t;for(C(n-257,5),C(e-1,5),C(r-4,4),t=0;t<r;t++)C(y[he[t]].dl,3);be(R,n-1),be(B,e-1)}function Tn(n){var e,r,t,f;if(f=u-j,$n[On]=sn,Jn(I),Jn(S),t=Ve(),e=tn+3+7>>3,r=zn+3+7>>3,r<=e&&(e=r),f+4<=e&&j>=0){var o;for(C((Pe<<1)+n,3),Se(),Gn(f),Gn(~f),o=0;o<f;o++)Pn(c[j+o])}else r==e?(C((Ge<<1)+n,3),$e(D,nn)):(C((Re<<1)+n,3),Ye(I.max_code+1,S.max_code+1,t+1),$e(R,B));ge(),n!=0&&Se()}function _n(n,e){if(Ln[H++]=e,n==0?R[e].fc++:(n--,R[un[e]+An+1].fc++,B[me(n)].fc++,Kn[In++]=n,sn|=Sn),Sn<<=1,(H&7)==0&&($n[On++]=sn,sn=0,Sn=1),J>2&&(H&4095)==0){var r=H*8,t=u-j,f;for(f=0;f<k;f++)r+=B[f].fc*(5+hn[f]);if(r>>=3,In<parseInt(H/2)&&r<parseInt(t/2))return!0}return H==qn-1||In==fe}function $e(n,e){var r,t,f=0,o=0,l=0,a=0,i,_;if(H!=0)do(f&7)==0&&(a=$n[l++]),t=Ln[f++]&255,(a&1)==0?K(t,n):(i=un[t],K(i+An+1,n),_=Xn[i],_!=0&&(t-=Nn[i],C(t,_)),r=Kn[o++],i=me(r),K(i,e),_=hn[i],_!=0&&(r-=bn[i],C(r,_))),a>>=1;while(f<H);K(ie,n)}var ne=16;function C(n,e){P>ne-e?(O|=n<<P,Gn(O),O=n>>ne-P,P+=e-ne):(O|=n<<P,P+=e)}function Ie(n,e){var r=0;do r|=n&1,n>>=1,r<<=1;while(--e>0);return r>>1}function Se(){P>8?Gn(O):P>0&&Pn(O),O=0,P=0}function Je(){if(g!=0){var n,e;for(n=Le(),v==null?v=pn=n:pn=pn.next=n,n.len=g-x,e=0;e<n.len;e++)n.ptr[e]=Y[x+e];g=x=0}}function nr(n,e){var r,t,f,o;for(kn=n,Wn=0,He(e),t=new Array(1024),r="";(f=Xe(t,0,t.length))>0;)for(o=0;o<f;o++)r+=String.fromCharCode(t[o]);return kn=null,r}function er(n){for(var e="",r=0;r<n.length;r+=3)r+2==n.length?e+=ee(n.charCodeAt(r),n.charCodeAt(r+1),0):r+1==n.length?e+=ee(n.charCodeAt(r),0,0):e+=ee(n.charCodeAt(r),n.charCodeAt(r+1),n.charCodeAt(r+2));return e}function ee(n,e,r){var t=n>>2,f=(n&3)<<4|e>>4,o=(e&15)<<2|r>>6,l=r&63,a="";return a+=Un(t&63),a+=Un(f&63),a+=Un(o&63),a+=Un(l&63),a}function Un(n){return n<10?String.fromCharCode(48+n):(n-=10,n<26?String.fromCharCode(65+n):(n-=26,n<26?String.fromCharCode(97+n):(n-=26,n==0?"-":n==1?"_":"?")))}const rr=(n,{type:e="uml",name:r="uml",open:t=`start${r}`,close:f=`end${r}`,fence:o=r,format:l="svg",server:a="https://www.plantuml.com/plantuml",srcGetter:i=d=>`${a}/${l}/${er(nr(unescape(encodeURIComponent(`@start${r}
${d.trim()}
@end${r}`)),9))}`,render:_=(d,b,U,L,mn)=>{const X=d[b],{content:vn,info:jn="plantuml diagram"}=X;return X.tag="img",X.attrPush(["src",i(vn)]),X.attrPush(["alt",jn]),mn.renderToken(d,b,U)}}={})=>{if(e==="uml")n.use(ke,{name:r,open:t,close:f,render:_});else{const d=n.renderer.rules.fence;n.renderer.rules.fence=(b,U,L,mn,X)=>{const vn=b[U],[jn,ze]=vn.info.split(" ",2);return jn===o?(vn.info=ze,_(b,U,L,mn,X)):d(b,U,L,mn,X)}}};export{rr as plantuml};
//# sourceMappingURL=index.js.map
